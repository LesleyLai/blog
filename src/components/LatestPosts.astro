---
// Latest posts shown on the home page

import { getCollection } from "astro:content";

import { getCurrentLanguage } from "@i18n/i18n";

import { BLOG_POSTS, sortByDate } from "@content/blog";

const lang = getCurrentLanguage(Astro);

const posts = BLOG_POSTS.byLang(lang).filter((post) => !post.untranslated);
sortByDate(posts);
const mostRencentPosts = posts.slice(0, 3);

const options: Intl.DateTimeFormatOptions = {
  year: "numeric",
  month: "short",
  day: "numeric",
};
const formatDate = (date: Date) => date.toLocaleDateString(lang, options);
---

<table>
  <tbody>
    {
      mostRencentPosts.map((post) => (
        <tr>
          <th scope="row">{formatDate(post.data.created)}</th>
          <td>
            <a href={`/${post.slug}`} data-astro-prefetch>
              {post.data.title}
            </a>
          </td>
        </tr>
      ))
    }
  </tbody>
</table>

<style>
  table {
    width: 100%;
  }

  th {
    width: 15%;
    min-width: 130px;
  }
</style>
